Bridge.assembly("HelloWeb",function(){"use strict";Bridge.define("HelloWeb.App",{main:function(){var presenter=new HelloWeb.StratagemPresenter;presenter.HelloWeb$IStratagemPresenter$ShowView()}});Bridge.define("HelloWeb.IStratagemPresenter",{$kind:"interface"});Bridge.define("HelloWeb.IStratagemView",{$kind:"interface"});Bridge.define("HelloWeb.IStratagemViewEvents",{$kind:"interface"});Bridge.define("HelloWeb.Storage.StartegiumStarage",{methods:{QueryStratagemList:function(){var $t,data=new(System.Collections.Generic.List$1(HelloWeb.Storage.StratagemData).ctor);return data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=1,$t.Title="1. Обмануть Императора, чтобы он переплыл море",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=2,$t.Title="2. Осадить Вэй, чтобы спасти Чжао",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=3,$t.Title="3. Убить чужим ножом",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=4,$t.Title="4. В покое ожидать утомленного врага",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=5,$t.Title="5. Грабить во время пожара",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=6,$t.Title="6. На востоке поднимать шум, на западе нападать",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=7,$t.Title="7. Извлечь нечто из ничего",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=8,$t.Title="8. Для вида чинить деревянные мостки, втайне выступить в Чэньцан",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=9,$t.Title="9. Наблюдать за огнём с противоположного берега",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=10,$t.Title="10. Скрывать за улыбкой кинжал",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=11,$t.Title="11. Сливовое дерево засыхает вместо персикового",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=12,$t.Title="12. Увести овцу легкой рукой",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=13,$t.Title="13. Бить по траве, чтобы вспугнуть змею",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=14,$t.Title="14. Позаимствовать труп, чтобы вернуть душу",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=15,$t.Title="15. Сманить тигра с горы на равнину",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=16,$t.Title="16. Если хочешь что-нибудь поймать, сначала отпусти",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=17,$t.Title="17. Бросить кирпич, чтобы получить яшму",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=18,$t.Title="18. Чтобы обезвредить разбойничью шайку, сначала надо поймать главаря",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=19,$t.Title="19. Тайно подкладывать хворост под котел другого",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=20,$t.Title="20. Ловить рыбу в мутной воде",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=21,$t.Title="21. Цикада сбрасывает свою золотую кожицу",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=22,$t.Title="22. Закрыть дверь и поймать вора",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=23,$t.Title="23. Объединиться с дальним врагом, чтобы побить ближнего",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=24,$t.Title="24. Объявив, что только собираешься пройти сквозь государство Го, захватить его",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=25,$t.Title="25. Украсть балки и заменить их гнилыми подпорками",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=26,$t.Title="26. Скрыть акацию и указать на тутовое дерево",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=27,$t.Title="27. Делать безумные жесты, не теряя равновесия",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=28,$t.Title="28. Заманить на крышу и убрать лестницу",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=29,$t.Title="29. Украсить сухие деревья искусственными цветами",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=30,$t.Title="30. Превратить роль гостя в роль хозяина",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=31,$t.Title="31. Стратагема красотки",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=32,$t.Title="32. Стратагема открытых городских ворот",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=33,$t.Title="33. Стратагема сеяния раздора",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=34,$t.Title="34. Стратагема самострела",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=35,$t.Title="35. Стратагема «цепи»",$t)),data.add(($t=new HelloWeb.Storage.StratagemData,$t.Id=36,$t.Title="36. Бегство (при полной безнадёжности)",$t)),data}}});Bridge.define("HelloWeb.Storage.StratagemData",{fields:{Id:0,Title:null}});Bridge.define("HelloWeb.Storage.TextStorage",{methods:{StartagemHtml:function(stratagemId){var request=new XMLHttpRequest,file="stratagem"+(System.Int32.format(stratagemId,"00")||"")+".txt";return request.open("GET",(System.String.format("https://oygan.github.io/strategium/startagem_notes/",null)||"")+(file||""),!1),request.overrideMimeType("text/html; charset=windows-1251"),request.send(),request.responseText}}});Bridge.define("HelloWeb.StratagemPresenter",{inherits:[HelloWeb.IStratagemPresenter,HelloWeb.IStratagemViewEvents],fields:{_view:null},alias:["ShowView","HelloWeb$IStratagemPresenter$ShowView","WantsStratagemMenu","HelloWeb$IStratagemViewEvents$WantsStratagemMenu","WantStratagemText","HelloWeb$IStratagemViewEvents$WantStratagemText"],methods:{ShowView:function(){this._view=new HelloWeb.StratagemView;this._view.HelloWeb$IStratagemView$SetEvents(Bridge.as(this,HelloWeb.IStratagemViewEvents))},WantsStratagemMenu:function(){var stratagems=(new HelloWeb.Storage.StartegiumStarage).QueryStratagemList();this._view.HelloWeb$IStratagemView$ClearStratagemText();this._view.HelloWeb$IStratagemView$UpdateStratagemMenu(stratagems)},WantStratagemText:function(stratagemId){var stratagemText=(new HelloWeb.Storage.TextStorage).StartagemHtml(stratagemId);this._view.HelloWeb$IStratagemView$ClearStratagemMenu();this._view.HelloWeb$IStratagemView$UpdateStratagemText(stratagemText)}}});Bridge.define("HelloWeb.StratagemView",{inherits:[HelloWeb.IStratagemView],fields:{_viewEvents:null,_wantStratgemButton:null,_stratgemDiv:null,_stratgemList:null},alias:["SetEvents","HelloWeb$IStratagemView$SetEvents","ClearStratagemMenu","HelloWeb$IStratagemView$ClearStratagemMenu","UpdateStratagemMenu","HelloWeb$IStratagemView$UpdateStratagemMenu","UpdateStratagemText","HelloWeb$IStratagemView$UpdateStratagemText","ClearStratagemText","HelloWeb$IStratagemView$ClearStratagemText"],ctors:{ctor:function(){this.$initialize();this._wantStratgemButton=document.createElement("button");this._stratgemDiv=document.createElement("div");this._stratgemList=document.createElement("ul");this._wantStratgemButton.innerHTML="Стратагемы";document.body.appendChild(this._wantStratgemButton);document.body.appendChild(this._stratgemList);document.body.appendChild(this._stratgemDiv);this._wantStratgemButton.onclick=Bridge.fn.bind(this,function(){this._viewEvents.HelloWeb$IStratagemViewEvents$WantsStratagemMenu()})}},methods:{SetEvents:function(viewEvents){this._viewEvents=viewEvents},ClearStratagemMenu:function(){this._stratgemList.innerHTML=""},UpdateStratagemMenu:function(stratagems){var $t,stratagem,li;this._stratgemList.innerHTML="";$t=Bridge.getEnumerator(stratagems);try{while($t.moveNext())stratagem={v:$t.Current},li=document.createElement("li"),li.textContent=stratagem.v.Title,this._stratgemList.appendChild(li),li.onclick=function($me,stratagem){return Bridge.fn.bind($me,function(){this._viewEvents.HelloWeb$IStratagemViewEvents$WantStratagemText(stratagem.v.Id)})}(this,stratagem)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$dispose()}},UpdateStratagemText:function(stratagemText){this._stratgemDiv.innerHTML=stratagemText},ClearStratagemText:function(){this._stratgemDiv.innerHTML=""}}})});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAiZmlsZSI6ICJIZWxsb1dlYi5taW4uanMiLAogICJzb3VyY2VSb290IjogIiIsCiAgInNvdXJjZXMiOiBbXSwKICAibmFtZXMiOiBbXSwKICAibWFwcGluZ3MiOiAiIiwKICAic291cmNlc0NvbnRlbnQiOiBbXQp9Cg==
